var recorder,stream;function startRecording(){var e=document.querySelector("#recorded_audio");e&&e.removeChild(e.firstChild),document.querySelector("#startButton").classList.add("hidden"),document.querySelector("#stopButton").classList.remove("hidden"),navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){stream=e,(recorder=new MediaRecorder(stream)).start()}).catch(function(e){console.log(e)})}function stopRecording(){document.querySelector("#startButton").classList.remove("hidden"),document.querySelector("#stopButton").classList.add("hidden"),recorder.stop(),stream.getTracks().forEach(function(e){e.stop()}),recorder.ondataavailable=function(e){playAudio(new Blob([e.data],{type:"audio/ogg; codecs=opus"}))}}function playAudio(e){var t=document.createElement("audio");t.src=URL.createObjectURL(e),t.controls=!0;let r=document.querySelector("#recorded_audio");r.appendChild(t)}navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{var t=WaveSurfer.create({container:"#waveform",waveColor:"#7065F0",barHeight:10,interact:!1,cursorWidth:0,plugins:[WaveSurfer.microphone.create()]});t.microphone.on("deviceReady",function(e){console.log("Device ready!",e)}),t.microphone.on("deviceError",function(e){console.warn("Device error: "+e)}),t.microphone.start(),navigator.mediaDevices.enumerateDevices().then(e=>{e.filter(e=>"audioinput"===e.kind).map(e=>{let{label:t,groupId:r}=e,o=document.querySelector("#selectmic"),a=document.createElement("option");a.value=r,a.textContent=t,o.appendChild(a)})}).catch(e=>{console.error(e)})}).catch(e=>{document.getElementById("funcwrapper").classList.add("hidden"),document.getElementById("disabledmic").classList.add("show"),console.error(e)}),document.getElementById("startButton").addEventListener("click",startRecording),document.getElementById("stopButton").addEventListener("click",stopRecording);